# ☕CafeOIManager.c (카페 주문 및 재고 관리 시스템)

이 프로젝트는 카페의 주문과 재고를 관리하기 위한 시스템입니다.

C 언어와 MySQL을 이용하여 구현되었으며, 터미널 환경에서 동작합니다.

주문 관리와 재고 관리 두 개의 주요 모듈로 구성되어 있으며, 각 모듈은 사용자에게 다양한 기능을 제공합니다.

## 주요 기능

### 주문 관리 시스템

1. **메뉴판 확인**: 데이터베이스의 `menu` 테이블에서 메뉴 정보를 조회합니다.
2. **고객 검색**: 고객 이름을 입력하여 `cust` 테이블에서 해당 고객 정보를 검색합니다.
3. **주문 입력**: 주문 정보를 입력하여 `orders` 테이블에 새로운 주문을 추가하고, 고객 포인트를 업데이트합니다.
    - 일반 고객의 경우 주문 금액의 1% 포인트 적립
    - 직원의 경우 주문 금액의 5% 포인트 적립
4. **주문 취소**: 주문 번호(oid)를 기준으로 주문을 삭제하고, 이에 따른 고객 포인트 차감 작업을 수행합니다.
5. **주문 내역 확인**: 현재 등록된 모든 주문 내역을 조회합니다.
6. **신규 고객 등록**: 신규 고객의 정보를 `cust` 테이블에 추가합니다.
7. **생일 포인트 적립**: 오늘이 고객의 생일인 경우 포인트를 추가하고, 중복 적립을 방지하기 위해 상태 플래그(bOX)를 관리합니다.

### 재고 관리 시스템

1. **재고 주문 내역 및 재고 현황 조회**: `iorders` 테이블의 재고 주문 내역과 `inventory` 테이블의 현재 재고 상태를 확인할 수 있습니다.
2. **재고 검색**: 상품 이름, 공급 업체(회사), 혹은 카테고리별로 재고를 검색할 수 있습니다.
3. **재고 주문 입력**: 재고 주문을 추가하고, 주문 수량만큼 재고 수량을 업데이트합니다.
4. **재고 주문 취소**: 재고 주문 번호(ioid)를 기준으로 주문을 취소하고, 해당 재고 수량을 복구합니다.
5. **재고 업데이트**: 특정 상품의 재고 수량을 직접 업데이트하는 기능을 제공합니다.

## 시스템 구성 및 기술 스택

- **언어 및 라이브러리**
    - C 언어 (표준 라이브러리 및 MySQL C API)
- **데이터베이스**
    - MySQL: 주문, 고객, 재고 및 공급 업체 관련 데이터를 저장
- **주요 테이블**
    - `menu`: 메뉴 정보
    - `cust`: 고객 정보
    - `orders`: 주문 정보
    - `odetail`: 주문 상세 (포인트 계산 관련)
    - `inventory`: 재고 정보
    - `iorders`: 재고 주문 정보
    - `supply`: 공급 업체 정보

## 코드 구조

- **`main()` 함수**: 프로그램 시작점으로, 데이터베이스에 연결한 후 시스템 선택 메뉴를 호출합니다.
- **주문 관리 관련 함수**
    - `printMenu()`, `selectMenu()`: 주문 관리 메뉴 출력 및 사용자의 입력을 받아 처리합니다.
    - `inputCust()`, `inputOrder()`: 신규 고객 및 주문 정보를 입력받아 데이터베이스에 저장합니다.
    - `deleteOrder()`, `updateCustBirthday()`: 주문 삭제 및 고객 생일 포인트 적립과 관련된 기능을 수행합니다.
- **재고 관리 관련 함수**
    - `iprintMenu()`, `iselectMenu()`: 재고 관리 메뉴 출력 및 사용자의 입력을 받아 처리합니다.
    - `iinputOrder()`, `ideleteOrder()`, `imanageInventory()`: 재고 주문 입력, 취소, 업데이트 기능을 제공합니다.
- **유틸리티 함수**
    - `dbConn()`: MySQL 데이터베이스에 연결합니다.
    - `sendQuery()`, `getResult()`: SQL 쿼리를 전송하고 결과를 출력합니다.
    - `getCurrentYear()`, `resetbOX()`: 시스템 날짜 및 생일 포인트 적립 상태 관리 기능을 수행합니다.

## + 주의사항 및 개선점

- **에러 처리**: 데이터베이스 쿼리 실행 중 에러가 발생하면 프로그램이 종료되도록 구현되어 있으므로, 실제 운영 환경에서는 보다 세밀한 예외 처리가 필요합니다.
- **보안**: SQL 쿼리 생성 시 문자열 결합 방식으로 인해 SQL 인젝션 취약점이 있을 수 있으므로, 향후 보안 강화가 필요합니다.
- **코드 개선**: 함수 및 변수 이름, 주석 등을 통해 코드 가독성을 향상시킬 수 있으며, 모듈화를 통해 유지보수성을 높일 수 있습니다.
